services:
  hpc_drive:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: hpc_drive_service
    ports:
      - "7777:7777"
    volumes:
      - drive_data:/app/data # Persistent volume for SQLite DB and potentially other data
      - uploads_data:/app/src/hpc_drive/uploads # Persistent volume for uploaded files
    environment:
      DATABASE_URL: "sqlite:////app/data/drive.db"
      AUTH_SERVICE_ME_URL: "http://hpc_web:80/api/v1/me"
    networks:
      - system-management_hpc_network
    restart: unless-stopped

networks:
  system-management_hpc_network:
    external: true

volumes:
  drive_data: # Volume for the SQLite database (drive.db)
  uploads_data: # Volume for user uploaded files
